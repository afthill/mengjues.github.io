<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>《Introduction to React》 阅读笔记 | Make Fun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Chapter 01: 什么是ReactReact诞生于Facebook的广告部门，开始的时候这些前端的程序依然使用的是MVC模式去渲染模板的方法构建，这些模式主要用来处理数据集的双向绑定的问题。后来演进为现在的React的全新的前端开发模式，包括使用virtual DOM，JSX，Flux概念来构建复杂的javascript程序和前端用户界面。再到后面，react通过提供react native">
<meta name="keywords" content="React,Javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="《Introduction to React》 阅读笔记">
<meta property="og:url" content="http://m.imf.cc/2015/12/30/Introduction-to-React-Reader-Notes/index.html">
<meta property="og:site_name" content="Make Fun">
<meta property="og:description" content="Chapter 01: 什么是ReactReact诞生于Facebook的广告部门，开始的时候这些前端的程序依然使用的是MVC模式去渲染模板的方法构建，这些模式主要用来处理数据集的双向绑定的问题。后来演进为现在的React的全新的前端开发模式，包括使用virtual DOM，JSX，Flux概念来构建复杂的javascript程序和前端用户界面。再到后面，react通过提供react native">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://m.imf.cc/images/mvc.jpg">
<meta property="og:image" content="http://m.imf.cc/images/react1.PNG">
<meta property="og:image" content="http://m.imf.cc/images/react2.PNG">
<meta property="og:image" content="http://m.imf.cc/images/react3.PNG">
<meta property="og:image" content="http://m.imf.cc/images/auth_component.png">
<meta property="og:image" content="http://m.imf.cc/images/register_component.png">
<meta property="og:image" content="http://m.imf.cc/images/workout_log.png">
<meta property="og:image" content="http://m.imf.cc/images/workout_record.png">
<meta property="og:image" content="http://m.imf.cc/images/workout_history.png">
<meta property="og:updated_time" content="2019-01-31T01:39:44.272Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="《Introduction to React》 阅读笔记">
<meta name="twitter:description" content="Chapter 01: 什么是ReactReact诞生于Facebook的广告部门，开始的时候这些前端的程序依然使用的是MVC模式去渲染模板的方法构建，这些模式主要用来处理数据集的双向绑定的问题。后来演进为现在的React的全新的前端开发模式，包括使用virtual DOM，JSX，Flux概念来构建复杂的javascript程序和前端用户界面。再到后面，react通过提供react native">
<meta name="twitter:image" content="http://m.imf.cc/images/mvc.jpg">
  
  
  <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/open-fonts/css/open-sans.css">
  <link rel="stylesheet" href="/open-fonts/css/share-tech-mono.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  

</head>
</html>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><i class="logo"></i><span class="site-title">Make Fun</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div class="profile" id="profile-nav">
          <a id="profile-anchor" href="javascript:;"><img class="avatar" src="/css/images/avatar.png"><i class="fa fa-caret-down"></i></a>
        </div>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://m.imf.cc"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
      
        <td><a class="main-nav-link" href="/">Home</a></td>
      
        <td><a class="main-nav-link" href="/archives">Archives</a></td>
      
        <td><a class="main-nav-link" href="/about">About</a></td>
      
      <td>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://m.imf.cc"></form>
      </td>
      </tr>
    </table>
  </div>
  
</header>
    <div class="outer">
      <aside id="profile">
  <div class="inner profile-inner">
  	<div class="base-info profile-block">
		  <img id="avatar" src="/css/images/avatar.png">
      <h2 id="name">Meng Jue (M)</h2>
      <h3 id="title">Strict Developer &amp; Funny Player</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Shanghai, China</span>
      <a id="follow" href="https://github.com/MengjueM">关注我</a>
  	</div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        319
        <span>文章</span>
      </div>
      <div class="article-info-block">
        236
        <span>标签</span>
      </div>
    </div>
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
        
          <td><a href="http://github.com/MengjueM" title="github"><i class="fa fa-github"></i></a></td>
        
          <td><a href="#" title="twitter"><i class="fa fa-twitter"></i></a></td>
        
          <td><a href="#" title="facebook"><i class="fa fa-facebook"></i></a></td>
        
          <td><a href="#" title="dribbble"><i class="fa fa-dribbble"></i></a></td>
        
          <td><a href="/atom.xml" title="rss"><i class="fa fa-rss"></i></a></td>
        
        </tr>
      </table>
    </div>
  </div>
</aside>
      <section id="main"><article id="post-Introduction-to-React-Reader-Notes" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      《Introduction to React》 阅读笔记
    </h1>
  

        <div class="article-meta">
          <div class="article-date">
  <i class="fa fa-calendar"></i>
  <a href="/2015/12/30/Introduction-to-React-Reader-Notes/">
    <time datetime="2015-12-30T05:28:07.000Z" itemprop="datePublished">2015-12-30</time>
  </a>
</div>
          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Coding/">程序语言</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chapter-01-什么是React"><a href="#Chapter-01-什么是React" class="headerlink" title="Chapter 01: 什么是React"></a>Chapter 01: 什么是React</h2><p>React诞生于Facebook的广告部门，开始的时候这些前端的程序依然使用的是MVC模式去渲染模板的方法构建，这些模式主要用来处理数据集的双向绑定的问题。后来演进为现在的React的全新的前端开发模式，包括使用virtual DOM，JSX，Flux概念来构建复杂的javascript程序和前端用户界面。再到后面，react通过提供react native延及到手机开发领域，使用与react同样的开发模式和理念。</p>
<a id="more"></a>
<h3 id="为什么要使用react？"><a href="#为什么要使用react？" class="headerlink" title="为什么要使用react？"></a>为什么要使用react？</h3><p>react在被创立的时候，主要是facebook需要解决在一个特别的需要的时候面临的技术挑战。</p>
<blockquote>
<p>《The Art of Unix Programming》 by Eric Raymond about the Rule of Modularity:<br>The only way to write complex software that won’t fall on its face is to hold its global complexity down – to build it out of simple parts connected by well-defined interfaces – so that most problems are local and you can have some hope of upgrading a part without breaking the whole.</p>
</blockquote>
<p>这也是react在结果复杂的用户界面的时候使用的解决问题的方法。 react在facebook完美地解决了在large-scale UI上显示数据的问题。</p>
<h3 id="React解决了什么问题？"><a href="#React解决了什么问题？" class="headerlink" title="React解决了什么问题？"></a>React解决了什么问题？</h3><p>在现在的Client-Server框架设计中，往往把大部分UI的工作交给了浏览器和HTML、CSS和Javascript，这些设计往往使用的是“单页应用程序（SPA）”。但是当大量新的用户交互的需求加进来之后，代码往往变得难以维护，react主要解决的就是这些问题。</p>
<p>举例来说常见的客户端的MVC架构：应用程序必须包含views用来监听models，然后views可以独立的发生基于用户或者models的数据变化的更新。但是当应用程序需要scale的时候，越来越多的view和model加入了进来，在views和model之间的关系就会变得越来越错综复杂，在原来的应用程序中增加feature变得越来越困难。</p>
<p>React的诞生就是为了解决这些问题：首先facebook认为他们已经写好了初始的应用框架代码去描述应用程序能够做什么和看起来应该是什么样子，因此当后台的数据或者前端的状态（state）改变时可以只用再次运行一次layout启动代码。对于这样的想法的直接反应就是，这将会影响前端性能和用户体验。当你完整地替换在浏览器中运行的代码的时候，用户的屏幕将会闪烁和出现奇怪的样式，因此这看起来是低效的。facebook也看到了这个情况，他们的解决办法是创立一个新的机制去替换数据改变时的状态，这个替换的方法是可以被优化的。这就是react实际解决到的问题！</p>
<h3 id="React不只是另外一个Javascript前端框架"><a href="#React不只是另外一个Javascript前端框架" class="headerlink" title="React不只是另外一个Javascript前端框架"></a>React不只是另外一个Javascript前端框架</h3><p>传统的前端框架使用的MVC模式如下：</p>
<p><img src="/images/mvc.jpg"></p>
<h4 id="model"><a href="#model" class="headerlink" title="model"></a>model</h4><p>model主要用来处理应用程序的状态（state），然后发送状态（state）改变的事件给view。</p>
<h4 id="view"><a href="#view" class="headerlink" title="view"></a>view</h4><p>view主要是用户的界面和交互的接口。view可以发送事件给controller，有时也会直接发送给model。</p>
<h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><p>controller是时间（events）调度器（dispatcher），可以发送指令给model去更新数据状态（state），或者发送界面变化给view去更新界面。</p>
<p>这个是一个基本的MVC的模式，在现存的前端MVC框架中可能基于这些基本的模式而衍生出来一些变种。</p>
<p>但是React与这些前端的框架都不同，react是描述应用程序UI的一种方式和当数据改变时UI更新的一种机制。如果真来对比的话，react类似于MVC模式中view。</p>
<p>react使用declarative的方式去定义用户的UI，并没有使用可见的数据绑定（data binding）技术，由于react的这种简单的组件定义方式，使你很容易的把这些不同的组件组合起来而使你的应用程序scalable。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;section id=&quot;todoapp&quot;&gt;&lt;/section&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src=&quot;react.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;JSXTransformer.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;js/utils.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;js/todoModel.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/jsx&quot; src=&quot;js/todoItem.jsx&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/jsx&quot; src=&quot;js/footer.jsx&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/jsx&quot; src=&quot;js/app.jsx&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li><code>section</code>是用来放置渲染后的React组件</li>
<li><code>react.js</code>是react的基础库</li>
<li><code>JSXTransformer.js</code>是JSX transformer</li>
<li><code>utils.js</code>、<code>todoModel.js</code>是data model和基础的公用库</li>
<li><code>todoItem.jsx</code>、<code>footer.jsx</code>、<code>app.jsx</code>是application内容，application是由app.jsx中的组件渲染的</li>
</ul>
<p>app.jsx</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var model = new app.TodoModel(&apos;react-todos&apos;);</span><br><span class="line"></span><br><span class="line">function render() &#123;</span><br><span class="line">    React.render(</span><br><span class="line">        &lt;TodoApp model=&#123;model&#125;/&gt;,</span><br><span class="line">        document.getElementById(&apos;todoApp&apos;)</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">model.subscribe(render);</span><br><span class="line">render();</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li><code>&lt;TodoApp model={model}/&gt;</code>，JSX，Javascript XML transpiler，用来与集成进去react。JSX不是react必须的，但是通过使用JSX可以使代码可读性更好。这个JSX转化为Javascript后类似于：<code>React.createElement(TodoApp, {model: model})</code></li>
<li>当组件（component）创建完成后，如果想附加到DOM中时，可以把要附加的DOM放在render的第二个参数里，比如这里是<code>React.render(..., yourDomIdentifier)</code></li>
</ul>
<h3 id="React是如何创建组件（component）的"><a href="#React是如何创建组件（component）的" class="headerlink" title="React是如何创建组件（component）的"></a>React是如何创建组件（component）的</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var TodoApp = React.createClass(&#123;</span><br><span class="line">    render: function() &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li>首先是调用<code>React.createClass()</code>, 然后这个方法接受的是一个Javascript对象，对象里定义了很多方法，但是最重要的是<code>render()</code>，被所有的react组件（component）所需要。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">render: function() &#123;</span><br><span class="line">    var footer;</span><br><span class="line">    var main;</span><br><span class="line">    var todos = this.props.model.todos;</span><br><span class="line"></span><br><span class="line">    var showTodos = todos.filter(function(todo) &#123;</span><br><span class="line">        switch (this.state.nowShowing) &#123;</span><br><span class="line">            case app.ACTIVE_TODOS:</span><br><span class="line">                return !todo.completed;</span><br><span class="line">            case app.COMPLETED_TODOS:</span><br><span class="line">                return todo.completed;</span><br><span class="line">            default:</span><br><span class="line">                return true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, this);</span><br><span class="line"></span><br><span class="line">    var todoItems = shownTodos.map(function (todo) &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;TodoItems</span><br><span class="line">                key=&#123;todo.id&#125;</span><br><span class="line">                todo=&#123;todo&#125;</span><br><span class="line">                onToggle=&#123;this.toggle.bind(this, todo)&#125;</span><br><span class="line">                onDestroy=&#123;this.toggle.bind(this, todo)&#125;</span><br><span class="line">                onEdit=&#123;this.edit.bind(this, todo)&#125;</span><br><span class="line">                editing=&#123;this.stat.editing === todo.id&#125;</span><br><span class="line">                onSave=(this.save.bind(this, todo))</span><br><span class="line">                onCancel=&#123;this.cancel&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;, this);</span><br><span class="line"></span><br><span class="line">    var activeTodoCount = todos.reduce(function(accum, todo) &#123;</span><br><span class="line">        return todo.completed ? accum : accum + 1;</span><br><span class="line">    &#125;, 0);</span><br><span class="line"></span><br><span class="line">    var completedCount = todos.length - activeTodoCount;</span><br><span class="line"></span><br><span class="line">    if (activeTodoCount || completedCount) &#123;</span><br><span class="line">        footer =</span><br><span class="line">            &lt;TodoFooter</span><br><span class="line">                count=&#123;activeTodoCount&#125;</span><br><span class="line">                completedCount=&#123;completedCount&#125;</span><br><span class="line">                nowShowing=&#123;this.state.nowShowing&#125;</span><br><span class="line">                onClearCompleted=&#123;this.clearCompleted&#125;</span><br><span class="line">            /&gt;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (todos.length) &#123;</span><br><span class="line">        main = (</span><br><span class="line">            &lt;section id=&quot;main&quot;&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                    id=&quot;toggle-all&quot;</span><br><span class="line">                    type=&quot;checkbox&quot;</span><br><span class="line">                    onChange=&#123;this.toggleAll&#125;</span><br><span class="line">                    checked=&#123;activeTodoCount === 0&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;ul id=&quot;todo-list&quot;&gt;</span><br><span class="line">                    &#123;todoItems&#125;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;header id=&quot;header&quot;&gt;</span><br><span class="line">                &lt;h1&gt;Todos&lt;/h1&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                    ref=&quot;newField&quot;</span><br><span class="line">                    id=&quot;new-todo&quot;</span><br><span class="line">                    placeholder=&quot;What needs to be done?&quot;</span><br><span class="line">                    onKeyDown=&#123;this.handleNewTodoKeyDown&#125;</span><br><span class="line">                    autoFocus=&#123;true&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/header&gt;</span><br><span class="line">            &#123;main&#125;</span><br><span class="line">            &#123;footer&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li><code>this.props.models.todos</code>，因为前面已经将<code>model={model}</code>传入了render函数，所以这里可以直接使用<code>this.props</code>访问</li>
<li>subcomponent: 这里的todoItems引用了另外一个react组件叫做<code>TodoItems</code>,位于自己独立的JSX文件中。</li>
</ul>
<p>TodoItems:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">app.todoItem = React.createClass(&#123;</span><br><span class="line">    render: function() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;li className=&#123;React.addons.classSet(&#123;</span><br><span class="line">                completed: this.props.todo.completed,</span><br><span class="line">                editing: this.props.editing</span><br><span class="line">            &#125;)&#125;&gt;</span><br><span class="line">                &lt;div className=&quot;view&quot;&gt;</span><br><span class="line">                    &lt;input</span><br><span class="line">                        className=&quot;toggle&quot;</span><br><span class="line">                        type=&quot;checkbox&quot;</span><br><span class="line">                        checked=&#123;this.props.todo.completed&#125;</span><br><span class="line">                        onChange=&#123;this.props.onToggle&#125;</span><br><span class="line">                    /&gt;</span><br><span class="line">                    &lt;lable onDoubleClick=&#123;this.handleEdit&#125;&gt;</span><br><span class="line">                        &#123;this.props.todo.title&#125;</span><br><span class="line">                    &lt;/lable&gt;</span><br><span class="line">                    &lt;button className=&quot;destroy&quot; onClick=&#123;this.props.onDestory&#125;/&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                    ref=&quot;editField&quot;</span><br><span class="line">                    className=&quot;edit&quot;</span><br><span class="line">                    value=&#123;this.state.editText&#125;</span><br><span class="line">                    onBlur=&#123;this.handleSubmit&#125;</span><br><span class="line">                    onChange=&#123;this.handleChange&#125;</span><br><span class="line">                    onKeyDown=&#123;this.handleKeyDown&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li>TodoItem组件，是TodoApp的子组件，用来处理单个的list item。</li>
<li>TodoItem组件可以被包含在TodoApp中，之所以要被分离到不同的组件中，是因为子组件包含了它自己的与用户之间的交互逻辑。</li>
<li>因为子组件不需要知道或者与application中的组件交互，因此它被制作成一个标准的组件。</li>
<li>React的功能就是子组件模块化，然后方便后期在scale时候的维护</li>
</ul>
<h3 id="如何组装react的子组件"><a href="#如何组装react的子组件" class="headerlink" title="如何组装react的子组件"></a>如何组装react的子组件</h3><ul>
<li><code>TodoItems</code>作为一个子组件，被加入一个无序列表中，然后这个无需列表放在一个变量中，叫做main。</li>
<li>footer变量包含了一个TodoFooter组件</li>
<li>然后main和foot变量被加入了TodoApp的返回值中</li>
</ul>
<p>React与传统MVC客户端框架有着大大的不同，因为react框架只是利用javascript去合成复杂的用户界面，所有与用户之间的交互都在可声明的组件中，并没有直接可以看到其他框架中很常见的数据绑定。</p>
<h2 id="React-中的概念和术语"><a href="#React-中的概念和术语" class="headerlink" title="React 中的概念和术语"></a>React 中的概念和术语</h2><p>加载react的方法：</p>
<ul>
<li>使用script标签（tag）</li>
<li>集成react进入Browserify或者WebPack工具<ul>
<li>允许你使用<code>require(&#39;React&#39;)</code></li>
<li>与CommonJS的模块加载系统兼容</li>
</ul>
</li>
</ul>
<h4 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h4><p>组件是React的核心，是你的应用程序的视图，通过使用<code>React.createClass()</code>建立：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var MyClass = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;hello world&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>或者使用ES6的class：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class MyClass extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div&gt;hello world&lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h3><p>虚DOM可能是React中最重要的概念，正如之前所说的，facebook每次当有数据更新或者用户交互时，都重新build了它的interface，但是也会带来严重的性能问题，facebook然后通过改变DOM更新的方式去提高性能：</p>
<p>Reconciliation：意思是每次当有DOM更新的需求的，react通过建立自己的虚DOM去计算最小需要更新的实际的DOM。</p>
<h3 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h3><p>JSX是transform层，用来转化写React组件的XML语法为真实的Javascript。这不是React必须要求的元素，但是它可以使构建application时更加方便。JSX不仅可以接受自定义的React类，而且可以接受HTML标签（tag），然后它可以通过JSX transformer转化为合适的React元素。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Header&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>没有JSX的版本：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(</span><br><span class="line">    React.creatElement(&apos;div&apos;, null, React.creatElement(&apos;h1&apos;, null, &apos;Header&apos;));</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties:"></a>Properties:</h3><p>在React中，properties经常被引用为<code>this.props</code>去访问properties，properties是一个组件所拥有的选项集，this.props是一个javascript对象，在整个react的生命周期中都不会改变，如果你想改变一个组件的state，应该通过state对象去修改。</p>
<h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>每个组件都有state，通过react被初始化，而且在整个react的生命周期中都可以被修改。state不应该被外部访问，除非父组件初始化或者增加了子组件的状态。在使用state，应该尽量避免使用过多的state，将会给组件引来更高的复杂度。</p>
<h3 id="Flux"><a href="#Flux" class="headerlink" title="Flux"></a>Flux</h3><p>Flux是与react非常相关的一个项目。Flux不是传统意义上的MVC双向数据绑定的架构，而是提供一个单向的数据流，然后这些数据修主要进入Flux架构的三个主要的方向：dispatcher, stores, react views。</p>
<h3 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h3><p>其他一些React的辅助工具，比如JSX transformer：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -g react-tools</span><br></pre></td></tr></table></figure>
<h3 id="Add-Ons"><a href="#Add-Ons" class="headerlink" title="Add-Ons"></a>Add-Ons</h3><p>可以通过<code>react-with-addon.js</code>被访问，如果使用Browserify或者WebPack，可以使用<code>require(react/addons)</code>去访问。</p>
<p>另外还有一些社区的addons，比如react-router：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var App = React.createClass(&#123;</span><br><span class="line">    getInitialState: function () &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li&gt;&lt;Link to=&quot;main&quot;&gt;Demographics&lt;/Link&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;Link to=&quot;profile&quot;&gt;Profile&lt;/Link&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;Link to=&quot;messages&quot;&gt;messages&lt;/Link&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;UserSelect /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;RouteHandler name=&#123;this.state.name&#125;/&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var routes = (</span><br><span class="line">    &lt;Route name=&quot;main&quot; path=&quot;/&quot; handler=&#123;App&#125;&gt;</span><br><span class="line">    &lt;Route name=&quot;profile&quot; handler=&#123;Profile&#125;&gt;</span><br><span class="line">    &lt;Route name=&quot;messages&quot; handler=&#123;messages&#125;&gt;</span><br><span class="line">    &lt;DefaultRoute handler=&#123;Demographics&#125;/&gt;</span><br><span class="line">    &lt;/Route&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">Route.run(routes, function (Handler, state) &#123;</span><br><span class="line">    React.render(&lt;Handler/&gt;, document.getElementById(&quot;content&quot;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Chapter02-The-Core-of-React"><a href="#Chapter02-The-Core-of-React" class="headerlink" title="Chapter02: The Core of React"></a>Chapter02: The Core of React</h2><h3 id="React-createClass"><a href="#React-createClass" class="headerlink" title="React.createClass"></a>React.createClass</h3><p>createClass方法用来创建一个react component，<code>React.createClass(specification)</code>的<br>specification需要传入一个Javascript对象，该对象必须包含<code>render()</code>方法。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var MyComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123;this.props.name&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(&lt;MyComponent name=&quot;frodo&quot;/&gt;, document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p>也可以使用ES6的新class语法来写：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123;this.props.name&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="React-Children-map"><a href="#React-Children-map" class="headerlink" title="React.Children.map"></a>React.Children.map</h3><p>map是React.Children的一个方法，里面理工了几个helper函数。React.Children是一个包含了几个helper函数的对象，用来便于使用component的properties：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.Children.map(children, myFn, [, context])</span><br></pre></td></tr></table></figure>
<p>其中children是包含了children的目标对象，myFn是将要应用到每一个child的函数，context用来指定<code>this</code>。</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var MyComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        React.Children.map(this.props.children, function(child) &#123;</span><br><span class="line">            console.log(child);</span><br><span class="line">            &#125;);</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123;this.props.name&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">React.render(&lt;MyComponent name=&quot;frodo&quot;&gt;&lt;p key=&quot;firsty&quot;&gt;a child&lt;/p&gt;</span><br><span class="line">&lt;p key=&quot;2&quot;&gt;another&lt;/p&gt;&lt;/MyComponent&gt;, document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<h3 id="React-Children-forEach"><a href="#React-Children-forEach" class="headerlink" title="React.Children.forEach"></a>React.Children.forEach</h3><p>类似于React.Children.map，区别是这个函数不会返回对象：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var MyComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        React.Children.forEach(this.props.children, function(child) &#123;</span><br><span class="line">            console.log(child);</span><br><span class="line">            &#125;);</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123;this.props.name&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.render(&lt;MyComponent name=&quot;frodo&quot;&gt;</span><br><span class="line">&lt;p key=&quot;firsty&quot;&gt;a child&lt;/p&gt;</span><br><span class="line">&lt;p key=&quot;2&quot;&gt;another&lt;/p&gt;</span><br><span class="line">&lt;/MyComponent&gt;, document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<h3 id="React-Children-count"><a href="#React-Children-count" class="headerlink" title="React.Children.count"></a>React.Children.count</h3><p>返回<code>this.props.children</code>所包含的component的个数。</p>
<h3 id="React-Children-only"><a href="#React-Children-only" class="headerlink" title="React.Children.only"></a>React.Children.only</h3><p>用来返回<code>this.props.children</code>所包含的唯一的component，不能用在多个component存在情况下。</p>
<h3 id="React-createElement"><a href="#React-createElement" class="headerlink" title="React.createElement"></a>React.createElement</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.createElement(type, [props[, [children ...]]]);</span><br></pre></td></tr></table></figure>
<p>如何不使用JSX的div标签，而使用createElement直接创建一例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var MyComponent = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;MyComponent&quot;,</span><br><span class="line"></span><br><span class="line">    render: function render () &#123;</span><br><span class="line">        return React.createElement(</span><br><span class="line">            &quot;div&quot;,</span><br><span class="line">            null,</span><br><span class="line">            this.props.name</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.render(React.createElement(MyComponent, &#123;name: &apos;frodo&apos;&#125;),</span><br><span class="line">document.getElementById(&quot;container&quot;));</span><br></pre></td></tr></table></figure>
<h3 id="React-cloneElement"><a href="#React-cloneElement" class="headerlink" title="React.cloneElement"></a>React.cloneElement</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.cloneElement(element, [props], [children ...]);</span><br></pre></td></tr></table></figure>
<h3 id="React-DOM"><a href="#React-DOM" class="headerlink" title="React.DOM"></a>React.DOM</h3><p>用来在不适用JSX的标签的情况下，动态创建DOM elements：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.DOM.div(null, &quot;my div&quot;);</span><br></pre></td></tr></table></figure>
<h3 id="React-createFactory"><a href="#React-createFactory" class="headerlink" title="React.createFactory"></a>React.createFactory</h3><p>基于element type创建element：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.createFactory(type);</span><br></pre></td></tr></table></figure>
<h3 id="React-render"><a href="#React-render" class="headerlink" title="React.render"></a>React.render</h3><p>React.render主要用来接受一个ReactElement，并把它合并到DOM中，同时支持加入callback用来在ReactElement并入DOM成功后回调：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var MyComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123;this.props.name&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.render(&lt;MyComponent name=&quot;frodo&quot;/&gt;, document.getElementById(&quot;conainter&quot;));</span><br></pre></td></tr></table></figure>
<h3 id="React-renderToString"><a href="#React-renderToString" class="headerlink" title="React.renderToString"></a>React.renderToString</h3><p>React.renderToString用来渲染一个ReactElement到它初始的HTML标签语言。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.renderToString(ReactElement);</span><br></pre></td></tr></table></figure>
<h3 id="React-findDOMNode"><a href="#React-findDOMNode" class="headerlink" title="React.findDOMNode"></a>React.findDOMNode</h3><p>返回传入的React组件的DOM元素。</p>
<h2 id="Discovering-React-Components"><a href="#Discovering-React-Components" class="headerlink" title="Discovering React Components"></a>Discovering React Components</h2><p>React Components 的创建：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        return (&lt;div&gt;Hello World&lt;/div&gt;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var MyComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (&lt;div&gt;Hello World&lt;/div&gt;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="component自己的api："><a href="#component自己的api：" class="headerlink" title="component自己的api："></a>component自己的api：</h3><p>setState，可以传入一个function，或者JS对象：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">setState(function (currState, currProps) &#123;</span><br><span class="line">    return &#123;X: currState.X + &quot;state changed&quot;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">setState(&#123;X: &quot;state changed&quot;&#125;);</span><br></pre></td></tr></table></figure>
<p>当setState被调用的时候，新的对象就会进入React的更新队列中，这个更新队列就是React用来维护对象的状态的改变。</p>
<p>一旦一个对象的状态准备要改变时，拥有这个新状态的对象或者部分状态更新的对象将会被合并入组件的状态的余部，实际的状态的更新过程是放在后台进行的，因此没有办法保证更新的顺序，因此在setState时，加入callback函数是非常必要的。</p>
<p>一个重要针对state的要点是：</p>
<p>用来不要直接改变对象的状态（<code>this.state</code>），而应该视该对象为immutable，只能通过React的setState方法加入React的队列来改变。</p>
<p>forceUpdate:</p>
<p>调用该方法，将强制React更新，依然使用的是React的队列系统，并强制组件更新自己的状态。它之所以可以做到强制更新是通过跳过react组件的一些lifecycle（ComponentShouldUpdate）。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">foreceUpdate(callback);</span><br></pre></td></tr></table></figure>
<h2 id="理解React组件的方法和属性集"><a href="#理解React组件的方法和属性集" class="headerlink" title="理解React组件的方法和属性集"></a>理解React组件的方法和属性集</h2><p>React.createElement的内部实现：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var ReactClassComponent = function () &#123;&#125;;</span><br><span class="line">assign(</span><br><span class="line">    ReactClassComponent.prototype,</span><br><span class="line">    ReactComponent.prototype,</span><br><span class="line">    ReactClassMixin</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>这里就是把ReactClassMixin和ReactComponent的prototype链接给了ReactClassComponent。因此通过ReactClassMixin引入了一个新的方法：replaceState。</p>
<p>replaceState函数将会完全地覆盖当前组件里的任何状态：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">replaceState(nextState, callback);</span><br></pre></td></tr></table></figure>
<p>isMounted: 来自于ReactClassMixin，用来检查组件是否已经并入DOM。</p>
<p>setPros(next, callback)或者replaceProps，用来设定component的props。</p>
<h3 id="组件的生命周期和渲染"><a href="#组件的生命周期和渲染" class="headerlink" title="组件的生命周期和渲染"></a>组件的生命周期和渲染</h3><p>Component specification functions:</p>
<p>render:</p>
<p>React的核心函数，接受一个ReactElement和一个DOM container；</p>
<p>getInitialState:</p>
<p>该函数只会被调用一次，在组件的render之前被调用，用来返回组件在被render时候的状态。</p>
<p>getDefaultProps:</p>
<p>当一个ReactClass第一次被创建的时候，getDefaultProps被调用一次，并且被缓存起来。该函数主要返回组件的<code>this.props</code>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GenericComponent = React.createClass(&#123;</span><br><span class="line">    getInitialState: function () &#123;</span><br><span class="line">        return &#123; thing: this.props.thingy&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    getDefaultProps: function () &#123;</span><br><span class="line">        return &#123;thingy: &quot;cheese&quot;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">class GenericComponent extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state = &#123;thing: props.thingy&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GenericComponent.defaultProps = &#123;thingy: &quot;cheese&quot;&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Mixins"><a href="#Mixins" class="headerlink" title="Mixins"></a>Mixins</h2><p>在组件的设计规范里，mixin是一个数组（array），一个mixins通过继承可以分享生命周期事件给主组件，示例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var SetIntervalMixin = &#123;</span><br><span class="line">    componentWillMount: function () &#123;</span><br><span class="line">        this.intervals = [];</span><br><span class="line">    &#125;,</span><br><span class="line">    setInterval: function () &#123;</span><br><span class="line">        this.intervals.push(setInterval.apply(null, arguments));</span><br><span class="line">    &#125;,</span><br><span class="line">    componentWillUnmount: function () &#123;</span><br><span class="line">        this.intervals.map(clearInterval);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var TickTock = React.createClass(&#123;</span><br><span class="line">    mixins: [SetIntervalMixin],</span><br><span class="line">    getInitialState: function () &#123;</span><br><span class="line">        return &#123;seconds: 0&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    componentDidMount: function () &#123;</span><br><span class="line">        this.setInterval(this.tick, 1000);</span><br><span class="line">    &#125;,</span><br><span class="line">    tick: function () &#123;</span><br><span class="line">        this.setState(&#123;seconds: this.state.seconds + 1&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                React has been running for &#123;this.state.seconds&#125; seconds.</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="propTypes"><a href="#propTypes" class="headerlink" title="propTypes"></a>propTypes</h2><p>propTypes是由React.PropTypes设定的：</p>
<p>PropTypes: {<br>    optionalBoolean: React.PropTypes.bool;<br>}</p>
<p>也可以应用其他的Javascript types：</p>
<ul>
<li>React.PropTypes.array</li>
<li>React.PropTypes.bool</li>
<li>React.PropTypes.func</li>
<li>React.PropTypes.number</li>
<li>React.PropTypes.object</li>
<li>React.PropTypes.string</li>
<li>React.PropTypes.any</li>
</ul>
<p>还可以设定为required：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PropTypes: &#123;</span><br><span class="line">    requiredBoolean: React.PropTypes.bool.isRequired</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了Javascript的types，还可以应用到React自身的types：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">myNodeProp: React.PropTypes.node</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">myNodeProp: React.PropTypes.element</span><br></pre></td></tr></table></figure>
<p>propType helpers:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.PropTypes.isinstanceOf(MyClass)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.PropTypes.oneOf([&apos;choose&apos;, &apos;cheese&apos;])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.PropTypes.onOfType([</span><br><span class="line">    React.PropTypes.string,</span><br><span class="line">    React.PropTypes.element,</span><br><span class="line">    React.PropTypes.instanceOf(MyClass)</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.PropTypes.arrayOf(React.PropTypes.string)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.PropTypes.objectOf(React.PropTypes.string)</span><br></pre></td></tr></table></figure>
<h3 id="statics"><a href="#statics" class="headerlink" title="statics"></a>statics</h3><p>通过设定statics属性，可以让function具有static属性，被调用时，不需要实例化function。</p>
<h3 id="displayName"><a href="#displayName" class="headerlink" title="displayName"></a>displayName</h3><p>用来显示在React app的debug信息中。</p>
<h3 id="componentWillMount"><a href="#componentWillMount" class="headerlink" title="componentWillMount"></a>componentWillMount</h3><p>是React在把component往DOM中渲染的时候的生命周期的事件之一，componentWillMount将会在初始化渲染组件之前被执行，如果在这个事件内调用了setState方法，则不会触发组件的二次渲染，因为后面的render将会收到一个修改过的state对象。</p>
<h3 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h3><p>是React把component成功地并入DOM后触发的事件，component已经变成了DOM的一部分，你可以访问自己的component在DOM中通过方法<code>React.findDOMNode()</code></p>
<h3 id="componentWillReceiveProps"><a href="#componentWillReceiveProps" class="headerlink" title="componentWillReceiveProps"></a>componentWillReceiveProps</h3><p>在component的prop有变化时，将会触发该事件。在该函数体内部依然可以使用setState，但是依然并不会触发二次的render。同时<code>this.props</code>并不会被覆盖，而且可以跟下一个即将传入的prop之间做对比：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">componentWillReceiveProps(nextProps)</span><br></pre></td></tr></table></figure>
<h3 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate"></a>shouldComponentUpdate</h3><p>该函数将会在prop或者state有改变时触发，在component被第一次渲染之前或者forceUpdate被使用之前，该函数不会被调用。该函数的主要目的是：可以通过定义函数体的返回值false，决定component不需要被render，当你知道该state或者prop的改变并非真正地需要被渲染进入DOM的时候。如果决定不渲染不仅会跳过render（）步骤，而且下一步的componnentWillUpdate和componentDidUpdate也不会被执行。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps, nextState)</span><br></pre></td></tr></table></figure>
<h3 id="componnentWillUpdate"><a href="#componnentWillUpdate" class="headerlink" title="componnentWillUpdate"></a>componnentWillUpdate</h3><p>在component被render之前被调用，在该函数中不能使用setState。</p>
<h3 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate"></a>componentDidUpdate</h3><p>在update被渲染之后执行该函数，并不会在第一次render组件时候执行，而是在更新组件时执行。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">componentDidUpdate(prevProps, prevState);</span><br></pre></td></tr></table></figure>
<h3 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount"></a>componentWillUnmount</h3><p>当React组件不再需要被渲染进入DOM时执行。</p>
<h4 id="完整的初始化渲染生命周期示例："><a href="#完整的初始化渲染生命周期示例：" class="headerlink" title="完整的初始化渲染生命周期示例："></a>完整的初始化渲染生命周期示例：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GenericComponent = React.createClass(&#123;</span><br><span class="line">    // Invoked first</span><br><span class="line">    getInitialProps: function () &#123;</span><br><span class="line">        return &#123;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Invoked second</span><br><span class="line">    getInitialState: function () &#123;</span><br><span class="line">        return &#123;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Third</span><br><span class="line">    componentWillMount: function () &#123;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Render - Fourth</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (&lt;h1&gt;Hello World&lt;/h1&gt;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //Lastly</span><br><span class="line">    componentDidMount: function () &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="/images/react1.PNG" alt=""></p>
<h4 id="完整的state改变时生命周期示例："><a href="#完整的state改变时生命周期示例：" class="headerlink" title="完整的state改变时生命周期示例："></a>完整的state改变时生命周期示例：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GenericComponent = React.createClass(&#123;</span><br><span class="line">    //First</span><br><span class="line">    shouldComponentUpdate: function () &#123;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Next</span><br><span class="line">    componnentWillUpdate: function () &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //Render</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (&lt;h1&gt;Hello World!&lt;/h1&gt;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //Finally</span><br><span class="line">    componentDidUpdate: function () &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/images/react2.PNG" alt=""></p>
<h4 id="完整的prop改变时生命周期示例："><a href="#完整的prop改变时生命周期示例：" class="headerlink" title="完整的prop改变时生命周期示例："></a>完整的prop改变时生命周期示例：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GenericComponent = React.createClass(&#123;</span><br><span class="line">    //Invoke First</span><br><span class="line">    componentWillReceiveProps: function (nextProp) &#123;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Second</span><br><span class="line">    shouldComponentUpdate: function(nextProp, nextState) &#123;</span><br><span class="line">        // if you want to prevent the component updating</span><br><span class="line">        // return false</span><br><span class="line">        return true;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Third</span><br><span class="line">    componnentWillUpdate: function(nextProp, nextState) &#123;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Render</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (&lt;h1&gt;Hello World!&lt;/h1&gt;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //Finally</span><br><span class="line">    componentDidUpdate: function () &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="/images/react3.PNG" alt=""></p>
<h2 id="React-Element"><a href="#React-Element" class="headerlink" title="React Element"></a>React Element</h2><ul>
<li>可以使用JSX创建React Element</li>
<li>或者使用<code>React.createElement</code></li>
</ul>
<p>两者是同义的，但是如果使用JSX创建React Element，将会使用JSX transcompiler转化为JSX。</p>
<p><strong>注意</strong>：通过<code>React.createElement</code>创建的element，并不被所有的浏览器所支持，现在支持的浏览器元素包括如下：</p>
<blockquote>
<p>a abbr address area article aside audio b base bdi bdo big blockquote body<br>br button canvas caption cite code col colgroup data datalist dd del details<br>dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2<br>h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label<br>legend li link main map mark menu menuitem meta meter nav noscript object<br>ol optgroup option output p param picture pre progress q rp rt ruby s samp<br>script section select small source span strong style sub summary sup table<br>tbody td textarea tfoot th thead time title tr track u ul var video wbr</p>
</blockquote>
<p>除了创建单纯的element之外，还可以用<code>React.createElement</code>创建一个复合的ReactClass用来满足特别的需求。另外支持的HTML属性如下：</p>
<blockquote>
<p>accept acceptCharset accessKey action allowFullScreen allowTransparency alt<br>async autoComplete autoFocus autoPlay cellPadding cellSpacing charSet<br>checked classID className colSpan cols content contentEditable contextMenu<br>controls coords crossOrigin data dateTime defer dir disabled download<br>draggable encType form formAction formEncType formMethod formNoValidate<br>formTarget frameBorder headers height hidden high href hrefLang htmlFor<br>httpEquiv icon id label lang list loop low manifest marginHeight marginWidth<br>max maxLength media mediaGroup method min multiple muted name noValidate<br>open optimum pattern placeholder poster preload radioGroup readOnly rel<br>required role rowSpan rows sandbox scope scoped scrolling seamless selected<br>shape size sizes span spellCheck src srcDoc srcSet start step style tabIndex<br>target title type useMap value width wmode <code>data-*</code> <code>aria-*</code></p>
</blockquote>
<h2 id="React-Factories"><a href="#React-Factories" class="headerlink" title="React Factories"></a>React Factories</h2><p>用来创建React所需要的HTML Element/Attribute, ReactClass等:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Button &#123;</span><br><span class="line">    //class stuff</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var Button = React.createFactory(require(&apos;Button&apos;));</span><br><span class="line"></span><br><span class="line">class App &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return Button(&#123;prop: &apos;foo&apos;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Chapter-03-JSX-Fundermental"><a href="#Chapter-03-JSX-Fundermental" class="headerlink" title="Chapter 03: JSX Fundermental"></a>Chapter 03: JSX Fundermental</h1><h3 id="为啥要用JSX代替Javascript"><a href="#为啥要用JSX代替Javascript" class="headerlink" title="为啥要用JSX代替Javascript"></a>为啥要用JSX代替Javascript</h3><p>React并不是必须依赖JSX，但是大部分人在写React还是使用的JSX，为啥呢？</p>
<ul>
<li>JSX是开发者和设计者更容易同时理解的语言</li>
<li>XML类似的语法，与HTML相似，类似于之前用到的模板语言语法</li>
<li>JSX依然是Javascript，在build时编译或者在浏览器中被编译</li>
<li>Facebook正在编写specification把JSX推荐为ECMA的一个扩展（extension）</li>
</ul>
<p>ECMA ES6已经实现了template literals:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var box = jsx`</span><br><span class="line">    &lt;$&#123;Box&#125;&gt;</span><br><span class="line">    $&#123;</span><br><span class="line">        shouldShowAnswer(user)?</span><br><span class="line">        jsx`&lt;$&#123;Answer&#125; value=$&#123;false&#125;&gt;no&lt;/$&#123;Answer&#125;&gt;` :</span><br><span class="line">        jsx`</span><br><span class="line">            &lt;$&#123;Box.comment&#125;&gt;</span><br><span class="line">            Text Content</span><br><span class="line">            &lt;/$&#123;Box.comment&#125;&gt;</span><br><span class="line">        `</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/$&#123;Box&#125;&gt;</span><br><span class="line">`;</span><br></pre></td></tr></table></figure>
<p>JSX:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var box =</span><br><span class="line">    &lt;Box&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            shouldShowAnswer(user)?</span><br><span class="line">            &lt;Answer value=&#123;false&#125;&gt;no&lt;/Answer&gt;</span><br><span class="line">            &lt;Box.Comment&gt;</span><br><span class="line">                Text Content</span><br><span class="line">            &lt;/Box.Comment&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/Box&gt;;</span><br></pre></td></tr></table></figure>
<p>明显JSX更加简洁可读。</p>
<h3 id="JSX是如何从XML转化为Javascript的？"><a href="#JSX是如何从XML转化为Javascript的？" class="headerlink" title="JSX是如何从XML转化为Javascript的？"></a>JSX是如何从XML转化为Javascript的？</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var Hello = React.createElement(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;div&gt; Hello &#123;this.props.name&#125; &lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(&lt;Hello name=&quot;World&quot;/&gt;, document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p>Post JSX transformation:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var Hello = React.createClass(&#123;</span><br><span class="line">    displayName: Hello,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(&quot;div&quot;, null, &quot;Hello&quot;, this.props.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(React.createElement(Hello, &#123;name: &apos;World&apos;&#125;), document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p>更复杂的：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GreetingComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;div&gt;Hello &#123;this.props.name&#125;&lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GenericComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;GreetingComponent name=&#123;this.props.name&#125;/&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(&lt;GenericComponent name=&quot;World&quot;/&gt;, document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li>GenericComponent只是一个container。</li>
</ul>
<p>JSX post transformation:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GreetingComponent = React.createClass(&#123;</span><br><span class="line">    displayName: &apos;GreetingComponent&apos;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(&quot;div&quot;, null, &quot;Hello&quot;, this.props.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var GenericComponent = React.createClass(&#123;</span><br><span class="line">    displayName: &apos;GenericComponent&apos;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(GreetingComponent, &#123;name: this.props.name&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(React.createElement(&apos;GenericComponent&apos;, &#123;&apos;name&apos;: &apos;World&apos;&#125;), document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p>可以看到嵌套React Element跟HTML ELement是一样一样的。</p>
<p><strong>注意</strong>：一般用首字母大写用来表示React Element，而小写用来表示HTML Element</p>
<h3 id="namespace-and-FormComponent"><a href="#namespace-and-FormComponent" class="headerlink" title="namespace and FormComponent"></a>namespace and FormComponent</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&apos;react&apos;);</span><br><span class="line"></span><br><span class="line">var FormComponent = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;form&gt;&#123;this.props.children&#125;&lt;/form&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">FormComponent.Row = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;fieldset&gt;&#123;this.props.children&#125;&lt;/fieldset&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">FormComponent.Label = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;label htmlFor=&#123;this.props.for&#125;&gt;&#123;this.props.text&#125;&#123;this.props.children&#125;&lt;/label&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">FormComponent.Input = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;input type=&#123;this.props.type&#125; id=&#123;this.props.id&#125;/&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var Form = FormComponent;</span><br><span class="line">var app = (</span><br><span class="line">    &lt;Form&gt;</span><br><span class="line">        &lt;Form.Row&gt;</span><br><span class="line">            &lt;Form.Label text=&quot;label&quot; for=&quot;txt&quot;&gt;</span><br><span class="line">                &lt;Form.Input id=&quot;txt&quot; type=&quot;text&quot;/&gt;</span><br><span class="line">            &lt;/FormLabel&gt;</span><br><span class="line">        &lt;/Form.Row&gt;</span><br><span class="line">        &lt;Form.Row&gt;</span><br><span class="line">            &lt;Form.Label text=&quot;label&quot; for=&quot;chx&quot;&gt;</span><br><span class="line">                &lt;Form.Input id=&quot;chx&quot; type=&quot;checkbox&quot;/&gt;</span><br><span class="line">            &lt;/FormLabel&gt;</span><br><span class="line">        &lt;/Form.Row&gt;</span><br><span class="line">    &lt;/Form&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(App, document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p>这里其实就是在前面声明一些React的虚拟元素，然后在后面的JSX里重用这些新声明的元素。</p>
<p>被transformer转化后的Javascript代码如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&apos;React&apos;);</span><br><span class="line"></span><br><span class="line">var FormComponent = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;FormComponent&quot;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(</span><br><span class="line">            &quot;form&quot;,</span><br><span class="line">            null,</span><br><span class="line">            this.props.children</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var FormComponent.Row = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;Row&quot;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(&quot;fieldset&quot;, null, this.props.children);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">FormComponent.Label = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;Label&quot;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(</span><br><span class="line">            &quot;label&quot;,</span><br><span class="line">            &#123;htmlFor: this.props[&quot;for&quot;]&#125;,</span><br><span class="line">            this.props.text,</span><br><span class="line">            this.props.children</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">FormComponent.Input = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;Input&quot;,</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(&quot;input&quot;, &#123;type: this.props.type, id: this.props.id&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var Form = FormComponent;</span><br><span class="line">var App = React.createElement(</span><br><span class="line">    Form,</span><br><span class="line">    null,</span><br><span class="line">    React.createElement(</span><br><span class="line">        Form.Row,</span><br><span class="line">        null,</span><br><span class="line">        React.createElement(</span><br><span class="line">            Form.Label,</span><br><span class="line">            &#123;text: &quot;label&quot;, &quot;for&quot;, &quot;txt&quot;&#125;,</span><br><span class="line">            React.creatElement(</span><br><span class="line">                Form.Input,</span><br><span class="line">                &#123;id: &apos;txt&apos;, type: &apos;text&apos;&#125;</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    ),</span><br><span class="line">    React.creatElement(</span><br><span class="line">        Form.Row,</span><br><span class="line">        null,</span><br><span class="line">        React.createElement(</span><br><span class="line">            Form.Label,</span><br><span class="line">            &#123;text: &quot;label&quot;, &quot;for&quot;: &quot;chx&quot;&#125;,</span><br><span class="line">            React.createElement(</span><br><span class="line">                Form.Input,</span><br><span class="line">                &#123;id: &quot;chx&quot;, type: &quot;checkbox&quot;&#125;</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(App, document.getElementById(&quot;container&quot;));</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong></p>
<p>除了上例中的“嵌套”和”命名空间”之外，还有一个重要的问题是React传递子元素时是通过<code>this.props.children</code>来做的。</p>
<h3 id="JSX-Property-Spreading"><a href="#JSX-Property-Spreading" class="headerlink" title="JSX Property Spreading"></a>JSX Property Spreading</h3><p>Property Spreading是衍生自ES6和ES7早期spec里面的概念。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var greeting = &#123;</span><br><span class="line">    name: &quot;World&quot;,</span><br><span class="line">    message: &quot;all your base are belong to us&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var Hello = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;div&gt; Hello &#123;this.props.name&#125;, &#123;this.props.greeting&#125;&lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.render(&lt;Hello &#123;...greeting&#125;/&gt;, document.getElementById(&quot;container&quot;));</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong></p>
<p><code>...</code>表示的就是property spreading。</p>
<p>如果用ES6的语法，可以与JSX对比下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var greeting = &#123;&#125;;</span><br><span class="line">greeting.name = &quot;World&quot;;</span><br><span class="line">greeting.message = &quot;All your base are belong to us.&quot;</span><br><span class="line"></span><br><span class="line">class Hello extends React.Component &#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;Hello &#123;this.props.name&#125;, &#123;this.props.message&#125;&lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">React.render(&lt;Hello &#123;...greeting&#125;/&gt;, document.getElementById(&apos;container&apos;))</span><br></pre></td></tr></table></figure>
<p>下面是JSX被transform后的真实的Javascript代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var greeting = &#123;&#125;;</span><br><span class="line">greeting.name = &quot;World&quot;;</span><br><span class="line">greeting.message = &quot;All your base are belong to us.&quot;;</span><br><span class="line"></span><br><span class="line">var Hello = (function (_React$Component) &#123;</span><br><span class="line">    function Hello () &#123;</span><br><span class="line">        _classCallCheck(this, Hello);</span><br><span class="line"></span><br><span class="line">        if (_React$Component != null) &#123;</span><br><span class="line">            _React$component.apply(this, arguments);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _inherits(Hello, _React$Component);</span><br><span class="line"></span><br><span class="line">    _createClass(Hello, [&#123;</span><br><span class="line">        key: &quot;render&quot;,</span><br><span class="line">        value: function render () &#123;</span><br><span class="line">            return React.createElement(</span><br><span class="line">                &quot;div&quot;,</span><br><span class="line">                null,</span><br><span class="line">                &quot;Hello &quot;,</span><br><span class="line">                this.props.name,</span><br><span class="line">                &quot;, &quot;,</span><br><span class="line">                this.props.message</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]);</span><br><span class="line">    return Hello;</span><br><span class="line">&#125;)(React.Component);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.render(React.createElement(Hello, greeting), document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p><strong>解析：</strong></p>
<p>这里并没有为property spreading使用专门额外的功能放在transform后的组件。通过使用property spreading，传入进来的JSON数据或者API数据，可以直接并入React的组件里。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var input1 = &#123;</span><br><span class="line">    &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">    &quot;text&quot;: &quot;label&quot;,</span><br><span class="line">    &quot;id&quot;: &quot;txt&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var input2 = &#123;</span><br><span class="line">    &quot;type&quot;: &quot;checkbox&quot;,</span><br><span class="line">    &quot;text&quot;: &quot;label&quot;,</span><br><span class="line">    &quot;id&quot;: &quot;chx&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var Form = FormComponent;</span><br><span class="line">var App = (</span><br><span class="line">    &lt;Form&gt;</span><br><span class="line">        &lt;Form.Row&gt;</span><br><span class="line">            &lt;Form.Label &#123;...input1&#125;&gt;</span><br><span class="line">                &lt;Form.Input &#123;...input1&#125;/&gt;</span><br><span class="line">            &lt;/Form.Label&gt;</span><br><span class="line">        &lt;/Form.Row&gt;</span><br><span class="line">        &lt;Form.Row&gt;</span><br><span class="line">            &lt;Form.Label &#123;...input2&#125;&gt;</span><br><span class="line">                &lt;Form.Input &#123;...input2&#125;/&gt;</span><br><span class="line">            &lt;/Form.Label&gt;</span><br><span class="line">        &lt;/Form.Row&gt;</span><br><span class="line">    &lt;/Form&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="Loop-in-JSX"><a href="#Loop-in-JSX" class="headerlink" title="Loop in JSX:"></a>Loop in JSX:</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class ListItem extends React.Component &#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        return &lt;li&gt;&#123;this.props.text&#125;&lt;/li&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class BigList extends React.Component &#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        var items = [&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;, &quot;item4&quot;];</span><br><span class="line">        var formattedItems = [];</span><br><span class="line">        for (var i = 0, ii = items.length; i &lt; ii; i++) &#123;</span><br><span class="line">            var textObj = &#123; text: items[i] &#125;;</span><br><span class="line">            formattedItems.push(&lt;ListItem &#123;...textObj&#125;/&gt;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &lt;ul&gt;&#123;formattedItems&#125;&lt;/ul&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">React.render(&lt;BigList/&gt;, document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<p><strong>转化后的代码：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var ListItem = (function (_React$Component) &#123;</span><br><span class="line">    function ListItem () &#123;</span><br><span class="line">        _classCallCheck(this, ListItem);</span><br><span class="line"></span><br><span class="line">        if (_React$Component != null) &#123;</span><br><span class="line">            _React$Component.apply(this, arguments);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _inherits(ListItem, _ReactComponent);</span><br><span class="line"></span><br><span class="line">    _createClass(ListItem, [&#123;</span><br><span class="line">        key: &quot;render&quot;,</span><br><span class="line">        value: function render () &#123;</span><br><span class="line">            return React.createElement(</span><br><span class="line">                &quot;li&quot;,</span><br><span class="line">                null,</span><br><span class="line">                this.props.text</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]);</span><br><span class="line"></span><br><span class="line">    return ListItem;</span><br><span class="line">&#125;)(React.Component);</span><br><span class="line"></span><br><span class="line">var BigList = (function (_React$Component2) &#123;</span><br><span class="line">    function BigList () &#123;</span><br><span class="line">        _classCallCheck(this, BigList);</span><br><span class="line"></span><br><span class="line">        if(_React$Component2 != null) &#123;</span><br><span class="line">            _React$Component2.apply(this, arguments);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _inherits(BigList, _ReactComponent2);</span><br><span class="line"></span><br><span class="line">    _createClass(BigList, [&#123;</span><br><span class="line">        key: &quot;render&quot;,</span><br><span class="line">        value: function render () &#123;</span><br><span class="line">            var items = [&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;, &quot;item4&quot;];</span><br><span class="line">            var formattedItems = [];</span><br><span class="line">            for (var i = 0, ii = items.length; i &lt; ii; i++) &#123;</span><br><span class="line">                var textObj = &#123;text: items[i]&#125;;</span><br><span class="line">                formattedItems.push(React.createElement(ListItem, textObj));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return React.createElement(</span><br><span class="line">                &quot;ul&quot;,</span><br><span class="line">                null,</span><br><span class="line">                formattedItems</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]);</span><br><span class="line"></span><br><span class="line">    return BigList;</span><br><span class="line">&#125;)(React.Component);</span><br><span class="line"></span><br><span class="line">React.render(React.createElement(BigList, null), document.getElementById(&apos;container&apos;));</span><br></pre></td></tr></table></figure>
<h3 id="Conditional-in-JSX"><a href="#Conditional-in-JSX" class="headerlink" title="Conditional in JSX"></a>Conditional in JSX</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var SignIn = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;a href=&quot;/signin&quot;&gt;Sign In&lt;/a&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var UserMenu = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;ul className=&quot;usermenu&quot;&gt;&lt;li&gt;Item&lt;/li&gt;&lt;li&gt;Another&lt;/li&gt;&lt;/ul&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var userIsSignedIn = false;</span><br><span class="line">var MainAPp = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        var navElement;</span><br><span class="line">        if (userIsSignedIn) &#123;</span><br><span class="line">            navElement = &lt;UserMenu/&gt;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            navElement = &lt;SignIn/&gt;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &lt;div&gt;&#123;navElement&#125;&lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.render(&lt;MainApp/&gt;, document.getElementById(&quot;container&quot;));</span><br></pre></td></tr></table></figure>
<p>被transform后的代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var SignIn = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;SignIn&quot;,</span><br><span class="line"></span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(</span><br><span class="line">            &quot;a&quot;,</span><br><span class="line">            &#123;href: &apos;/signin&apos;&#125;,</span><br><span class="line">            &quot;Sign In&quot;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var UserMenu = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;UserMenu&quot;,</span><br><span class="line"></span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return React.createElement(</span><br><span class="line">            &quot;ul&quot;,</span><br><span class="line">            &#123;className: &quot;usermenu&quot;&#125;,</span><br><span class="line">            React.createElement(</span><br><span class="line">                &quot;li&quot;,</span><br><span class="line">                null,</span><br><span class="line">                &quot;Item&quot;</span><br><span class="line">            ),</span><br><span class="line">            React.createElement(</span><br><span class="line">                &quot;li&quot;</span><br><span class="line">                null,</span><br><span class="line">                &quot;another&quot;</span><br><span class="line">            )</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var userIsSignedIn = false;</span><br><span class="line">var mainAPp = React.createClass(&#123;</span><br><span class="line">    displayName: &quot;MainApp&quot;,</span><br><span class="line"></span><br><span class="line">    render: function () &#123;</span><br><span class="line">        var navElement;</span><br><span class="line">        if (userIsSignedIn) &#123;</span><br><span class="line">            navElement = React.createElement(UserMenu, null);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            navElement = React.createElement(SignIn, null);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return React.createElement(</span><br><span class="line">            &quot;div&quot;,</span><br><span class="line">            null,</span><br><span class="line">            navElement</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.render(React.createElement(MainApp, null), document.getElementById(&quot;container&quot;));</span><br></pre></td></tr></table></figure>
<h3 id="JSX的三元操作符（Ternary-Operator）"><a href="#JSX的三元操作符（Ternary-Operator）" class="headerlink" title="JSX的三元操作符（Ternary Operator）"></a>JSX的三元操作符（Ternary Operator）</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var SignIn = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;a href=&quot;/signin&quot;&gt;Sign In&lt;/a&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var UserMenu = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;ul className=&quot;usermenu&quot;&gt;&lt;li&gt;Item&lt;/li&gt;&lt;li&gt;Another&lt;/li&gt;&lt;/ul&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var userIsSignedIn = true;</span><br><span class="line"></span><br><span class="line">var mainApp = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;div&gt;&#123;userIsSignedIn ? &lt;UserMenu/&gt; : &lt;SignIn/&gt;&#125;&lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Chapter-04-用React创建一个React网络应用程序"><a href="#Chapter-04-用React创建一个React网络应用程序" class="headerlink" title="Chapter 04: 用React创建一个React网络应用程序"></a>Chapter 04: 用React创建一个React网络应用程序</h2><p>使用React去创建一个跟踪团队每个人effort的应用程序。</p>
<h3 id="Thinking-in-terms-of-Component"><a href="#Thinking-in-terms-of-Component" class="headerlink" title="Thinking in terms of Component"></a>Thinking in terms of Component</h3><p>根据原始的想法和需求创建实际的应用程序有两种场景：</p>
<p>（一） 基于需求的大纲画出来线框图<br>（二） 基于已经存在的应用程序的架构，切分为不同React组件（component）</p>
<p><strong>WireFrames</strong></p>
<p>Authentication 组件：</p>
<p><img src="/images/auth_component.png" alt=""></p>
<p>Registration 组件：</p>
<p><img src="/images/register_component.png" alt=""></p>
<p>Workout Log Define 组件：</p>
<p><img src="/images/workout_log.png" alt=""></p>
<p>Workout Log Record 组件：</p>
<p><img src="/images/workout_record.png" alt=""></p>
<p>Workout Log History 组件：</p>
<p><img src="/images/workout_history.png" alt=""></p>
<p><strong>Rewrite an existing Application</strong></p>
<p>比如通常用到的常见的authentication前端：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;signInForm&quot; class=&quot;notSignIn&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;username&quot;&gt;Username:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;username&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;password&quot;&gt;</span><br><span class="line">    &lt;button id=&quot;signIn&quot;&gt;Sign In&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;createAccount&quot; class=&quot;notSignIn&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;username&quot;&gt;Username:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;username&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;password&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;password&quot;&gt;Confirm Password:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;confpassword&quot;&gt;</span><br><span class="line">    &lt;button id=&quot;signIn&quot;&gt;Create Account&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&apos;#signIn&apos;).on(&apos;click&apos;, function () &#123;</span><br><span class="line">    $(&apos;.notSignIn&apos;).hide();</span><br><span class="line">    $(&apos;.signIn&apos;).show();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这段代码可以抽象成的React组件如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Authentication&gt;</span><br><span class="line">    &lt;SignIn /&gt;</span><br><span class="line">    &lt;CreateAccount /&gt;</span><br><span class="line">&lt;/Authentication&gt;</span><br></pre></td></tr></table></figure>
<p>Navigation Menu的前端代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;ul id=&quot;navMenu&quot;&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;#defineWorkouts&quot;&gt;Define Workouts&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;#logWorkout&quot;&gt;Log Workouts&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;#viewHistory&quot;&gt;View History&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=&quot;#logout&quot; id=&quot;logout&quot;&gt;Logout&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>Save Workout Definition代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;defineWorkouts&quot; class=&quot;tabview&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;defineName&quot;&gt;Define Name&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;defineName&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;defineType&quot;&gt;Define Type&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;defineType&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;defineDesc&quot;&gt;Description&lt;/label&gt;</span><br><span class="line">    &lt;textarea id=&quot;defineDesc&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;button id=&quot;saveDefinition&quot;&gt;Save Definition&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>Record Workout 代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;logWorkout&quot; class=&quot;tabview&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;chooseWorkout&quot;&gt;Workout:&lt;/label&gt;</span><br><span class="line">    &lt;select name=&quot;&quot; id=&quot;chooseWorkout&quot;&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;label for=&quot;workoutResult&quot;&gt;Result:&lt;/label&gt;</span><br><span class="line">    &lt;input id=&quot;workoutResult&quot; type=&quot;text&quot;/&gt;</span><br><span class="line">    &lt;input id=&quot;workoutDate&quot; type=&quot;date&quot;/&gt;</span><br><span class="line">    &lt;label for=&quot;notes&quot;&gt;Notes&lt;/label&gt;</span><br><span class="line">    &lt;textarea id=&quot;notes&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>Workout History 代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;viewHistory&quot; class=&quot;tabview&quot;&gt;</span><br><span class="line">    &lt;ul id=&quot;history&quot;&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>然后可以基于这些基本的HTML组件创建React的组件。</p>
<h3 id="创建必须的组件"><a href="#创建必须的组件" class="headerlink" title="创建必须的组件"></a>创建必须的组件</h3><p><strong>SignIn Component</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line"></span><br><span class="line">var SignIn = React.createClass(&#123;</span><br><span class="line">    return function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;username&quot;&gt;Username</span><br><span class="line">                    &lt;input type=&quot;text&quot; id=&quot;username&quot;/&gt;</span><br><span class="line">                &lt;/label&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;password&quot;&gt;Password</span><br><span class="line">                    &lt;input type=&quot;text&quot; id=&quot;password&quot;/&gt;</span><br><span class="line">                &lt;/label&gt;</span><br><span class="line">                &lt;button id=&quot;signIn&quot; onClick=&#123;this.props.onAuthComplete.bind(null, this._doAuth)&#125; Sign In &lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line">    _doAuth: function () &#123;</span><br><span class="line">        true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = SignIn;</span><br></pre></td></tr></table></figure>
<p><strong>CreateAccount Component</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line">var CreateAcccount = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return(</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;username&quot;&gt;Username:</span><br><span class="line">                    &lt;input type=&quot;text&quot; id=&quot;username&quot;/&gt;</span><br><span class="line">                &lt;/label&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;password&quot;&gt;Password:</span><br><span class="line">                    &lt;input type=&quot;text&quot; id=&quot;password&quot;/&gt;</span><br><span class="line">                &lt;/label&gt;</span><br><span class="line">                &lt;button id=&quot;signIn&quot; onClick=&#123;this.props.onAuthComplete.bind(null, this._doAuth)&#125;&gt;Sign In&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    _doAuth: function () &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">modul.exports = SignIn;</span><br></pre></td></tr></table></figure>
<p><strong>CreateAccount Component</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line"></span><br><span class="line">var CreateAccount = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">            &lt;label htmlFor=&quot;username&quot;&gt;Username:</span><br><span class="line">                &lt;input type=&quot;text&quot; id=&quot;username&quot;/&gt;</span><br><span class="line">            &lt;/label&gt;</span><br><span class="line">            &lt;label htmlFor=&quot;password&quot;&gt;Password:</span><br><span class="line">                &lt;input type=&quot;text&quot; id=&quot;password&quot;</span><br><span class="line">            &lt;/label&gt;</span><br><span class="line">            &lt;label htmlFor=&quot;password&quot;&gt;Confirm Password:</span><br><span class="line">                &lt;input type=&quot;text&quot; id=&quot;confpassword&quot;/&gt;</span><br><span class="line">            &lt;/label&gt;</span><br><span class="line">            &lt;button id=&quot;signIn&quot; onClick=&#123;this.props.onAuthComplete.bind(null, this._createAccount)&#125;Create Account&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    _createAccount: function () &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">module.exports = CreateAccount;</span><br></pre></td></tr></table></figure>
<p><strong>Auth Component</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line">var SignIn = require(&quot;./signin.jsx&quot;);</span><br><span class="line">var CreateAccount = require(&quot;./createaccount.jsx&quot;);</span><br><span class="line"></span><br><span class="line">var Authentication = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;SignIn onAuthComplete=&#123;this.props.onAuthComplete&#125;/&gt;</span><br><span class="line">                &lt;CreateAccount onAuthComplete=&#123;this.props.onAuthComplete&#125;/&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">module.exports = Authentication;</span><br></pre></td></tr></table></figure>
<p><strong>Navigation Component</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line"></span><br><span class="line">var Navigation = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot; onClick=&#123;this.props.onNav.bind(null, this._nav(&quot;define&quot;))&#125;Define A Workout&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot; onClick=&#123;this.props.onNav.bind(null, this._nav(&quot;store&quot;))&#125;Record A Workout&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot; onClick=&#123;this.props.onNav.bind(null, this._nav(&quot;history&quot;))&#125;View History&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;#&quot; onClick=&#123;this.props.onLogout&#125;&gt;Logout&lt;/a&gt;&lt;/lib&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line">    _nav: function (view) &#123;</span><br><span class="line">        return view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = Navigation;</span><br></pre></td></tr></table></figure>
<p><strong>Define Component</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line"></span><br><span class="line">var defineWorkout = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div id=&quot;defineWorkouts&quot;&gt;</span><br><span class="line">                &lt;h2&gt;Define Workout&lt;/h2&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;defineName&quot;&gt;Define Name</span><br><span class="line">                    &lt;input type=&quot;text&quot; id=&quot;defineName&quot;/&gt;</span><br><span class="line">                &lt;/label&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;defineType&quot;&gt;Define Type</span><br><span class="line">                    &lt;input type=&quot;text&quot; id=&quot;defineType&quot;/&gt;</span><br><span class="line">                &lt;/label&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;defineDesc&quot;&gt;Description</span><br><span class="line">                    &lt;textarea type=&quot;text&quot; id=&quot;defineDesc&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">                &lt;/label&gt;</span><br><span class="line">                &lt;button id=&quot;saveDefinition&quot;&gt;Save Definition&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = DefineWorkout;</span><br></pre></td></tr></table></figure>
<p><strong>Store Component</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line"></span><br><span class="line">var Option = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;option&gt;&#123;this.props.value&#125;&lt;/option&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var StoreWorkout = React.createClass(&#123;</span><br><span class="line">    _mockWorkouts: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Murph&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;fortime&quot;,</span><br><span class="line">            &quot;description&quot;: &quot;&quot;Run 1 Mile \n 100 pull-ups \n 200</span><br><span class="line">            push-ups \n 300 squats \n Run 1 Mile&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Tabata Something Else&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;reps&quot;,</span><br><span class="line">            &quot;description&quot;: &quot;4 x 20 seconds on 10 seconds off for</span><br><span class="line">            4 minutes \n pull-ups, push-ups, sit-ups, squats&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        var opts = [];</span><br><span class="line">        for(var i = 0; i &lt; this._mockWorkouts.length; i++) &#123;</span><br><span class="line">            opts.push(&lt;Option value=&#123;this._mockWorkouts[i].name&#125;/&gt;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return (</span><br><span class="line">            &lt;div id=&quot;logWorkout&quot; class=&quot;tabview&quot;&gt;</span><br><span class="line">                &lt;h2&gt;Record Workout&lt;/h2&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;chooseWorkout&quot;&gt;Workout:&lt;/label&gt;</span><br><span class="line">                &lt;select name=&quot;&quot; id=&quot;chooseWorkout&quot;&gt;</span><br><span class="line">                    &#123;opts&#125;</span><br><span class="line">                &lt;/select&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;workoutResult&quot;&gt;Result:&lt;/label&gt;</span><br><span class="line">                &lt;input id=&quot;workoutResult&quot; type=&quot;text&quot; /&gt;</span><br><span class="line">                    78</span><br><span class="line">                &lt;input id=&quot;workoutDate&quot; type=&quot;date&quot; /&gt;</span><br><span class="line">                &lt;label htmlFor=&quot;notes&quot;&gt;Notes:&lt;/label&gt;</span><br><span class="line">                &lt;textarea id=&quot;notes&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">                &lt;button&gt;Store&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = StoreWorkout;</span><br></pre></td></tr></table></figure>
<p><strong>History Component</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var React = require(&quot;react&quot;);</span><br><span class="line"></span><br><span class="line">var ListItem = React.createClass(&#123;</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        return &lt;li&gt;&#123;this.props.name&#125; - &#123;this.props.result&#125;&lt;/li&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var History = React.createClass(&#123;</span><br><span class="line">    _mockHistory: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Murph&quot;,</span><br><span class="line">            &quot;result&quot;: &quot;32:18&quot;,</span><br><span class="line">            &quot;notes&quot;: &quot;painful, but fun&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Tabata Something Else&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;reps&quot;,</span><br><span class="line">            &quot;result&quot;: &quot;421&quot;,</span><br><span class="line">            &quot;notes&quot;: &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    render: function () &#123;</span><br><span class="line">        var hist = this._mockHistory;</span><br><span class="line">        var formatedLi = [];</span><br><span class="line">        for(var i = 0; i &lt; hist.length; i++) &#123;</span><br><span class="line">            var histObj = &#123;name: hist[i].name, result: hist[i].result&#125;;</span><br><span class="line">            formatedLi.push(&lt;ListItem &#123;...histObj&#125;/&gt;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;h2&gt;History&lt;/h2&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &#123;formatedLi&#125;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">module.exports = History;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="测试你的React应用程序"><a href="#测试你的React应用程序" class="headerlink" title="测试你的React应用程序"></a>测试你的React应用程序</h2><p>React addon <code>testUtils</code>中包含了大量的方法：</p>
<p><strong>Simulate</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">React.addons.testUtils.Simulate.&#123;eventName&#125;(DOMElement, eventData);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var node = React.findDOMNode(this.refs.input);</span><br><span class="line">React.addons.testUtils.Simulate.click(node);</span><br></pre></td></tr></table></figure>
<p><strong>renderIntoDocument</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://m.imf.cc/2015/12/30/Introduction-to-React-Reader-Notes/" data-id="cjrjycrn300a6bati0mrhl6uz" class="article-share-link">分享到</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/01/04/string-formatter-in-Python/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Python处理string的formatter的三种方法
        
      </div>
    </a>
  
  
    <a href="/2015/12/29/Other-usable-top-python-libraries-invented-recently/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">几个有用的python库介绍</div>
    </a>
  
</nav>

  
</article>

</section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Security/">Security</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Innards/">内核</a><span class="category-list-count">48</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Functional-Programming/">函数编程</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Dynamic-Programming/">动态编程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Fun/">好玩</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Security/">安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">安卓</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Recommend/">推荐</a><span class="category-list-count">57</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Math/">数学</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Solutions/">方案</a><span class="category-list-count">64</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MachineLearning/">机器学习</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Testing/">测试</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">程序语言</a><span class="category-list-count">71</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Notes/">笔记</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algo/">算法</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Automation/">自动化</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ComputerVision/">计算机视觉</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Review/">评测</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Interview/">面试</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">49</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">30</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Meng Jue (M)<br>
    </div>
  </div>
</footer>

    



<script src="/js/jquery-2.2.0.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>